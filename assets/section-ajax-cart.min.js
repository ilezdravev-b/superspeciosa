!function(t){"function"==typeof define&&define.amd?define("ajaxCart",t):t()}((function(){"use strict";const t=t=>{const n=document.getElementById("screenReaderStatus");n.textContent="",n.textContent=t};document.addEventListener("click",(n=>{const e=n.target.closest('[data-behavior="quantity"]');if(e){n.stopImmediatePropagation();const o=e.querySelector('input[name="quantity"]'),a=new Event("change",{bubbles:!0,cancellable:!0});a.clickTarget=n.target;let c,i,s=o.hasAttribute("min"),r=o.hasAttribute("max");c=s?o.getAttribute("min"):0,i=r?o.getAttribute("max"):999;const d="increment"==n.target.dataset.behavior,u="decrement"==n.target.dataset.behavior,l=parseInt(o.value,10);let w=l;if(u&&w--,d&&w++,w<c&&(w=c),w>i&&(w=i),w!=l){const n=window.fmData.a11yStrings.quantityUpdated.replace("[quantity]",w);o.value=w,o.dispatchEvent(a),t(n)}}}));const n=async(t,n=null,e=!0)=>{try{const c=await(o=t,a=n,a=a||{},new Promise((function(t,n){var e=new XMLHttpRequest,c=[],i=[],s={},r=function(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,text:function(){return Promise.resolve(e.responseText)},json:function(){return Promise.resolve(e.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([e.response]))},clone:r,headers:{keys:function(){return c},entries:function(){return i},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}};for(var d in e.open(a.method||"get",o,!0),e.onload=function(){e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,n,e){c.push(n=n.toLowerCase()),i.push([n,e]),s[n]=s[n]?s[n]+","+e:e})),t(r())},e.onerror=n,e.withCredentials="include"==a.credentials,a.headers)e.setRequestHeader(d,a.headers[d]);e.send(a.body||null)})));if(!c.ok)throw Error(c.statusText);if(e)return await c.json();if(!e)return await c.text()}catch(t){console.error(t)}var o,a},e=t=>document.getElementById(t),o=window.Shopify.routes.root,a="_isFreeGift",c="_priceRuleId",i=["ajaxCartContent","ajaxCartBtn","cartContent","announcementBars"],s=t=>{const n=[];for(const t of i){const e=document.getElementById(t);e&&n.push({replacedContentId:t,sectionId:e.closest(".shopify-section").id.replace("shopify-section-","")})}return t?n.map((t=>t.sectionId)):n},r=async(t,e)=>{const i={method:"POST",credentials:"same-origin",body:JSON.stringify({line:t,quantity:e,sections:s(!0)}),headers:{"Content-Type":"application/json"}},r=t-1,d=await(async()=>{const t=await n(`${o}cart.js`,{credentials:"same-origin"});return window.EventBus.emit("cart:fetched",t),t})(),u=d.items[r];if(!u)return;if(0==e&&u.hasOwnProperty("properties")&&null!==u.properties&&u.properties.hasOwnProperty(a)&&u.properties.hasOwnProperty(c)){let t={priceRuleId:u.properties[c]};const n=new CustomEvent("deletePromoCode",{bubbles:!1,cancelable:!0,detail:t});window.dispatchEvent(n)}return await n(`${o}cart/change.js`,i)},d=async t=>{const e={method:"POST",credentials:"same-origin",body:JSON.stringify({updates:t,sections:s(!0)}),headers:{"Content-Type":"application/json"}},a=await n(`${o}cart/update.js`,e);return window.EventBus.emit("cart:updated",a),a},u="data-cart-line",l="data-item-is-parent",w="data-add-time",m="data-key",p={removeItem:`[data-behavior="${"remove-line"}"]`,cartItems:".js-cart-items",cartItem:".js-cart-item"},f="animate-slide-up",h="cart-is-loading",y=(n,e)=>{n?(document.body.classList.add(h),t(window.fmData.a11yStrings.cartUpdating)):(document.body.classList.remove(h),e&&t(e))},v=async(t,n)=>{y(!0);let e={};if(n.hasAttribute(l)){const t=n.getAttribute(w),o=[...document.querySelectorAll(p.cartItem)].filter((function(n){return n.hasAttribute(w)&&n.getAttribute(w)==t}));for(const t of o){e[t.getAttribute(m)]=0}const a=await d(e),c=n.closest(p.cartItems);g(a,c.id),y(!1,window.fmData.cartStrings.itemRemoved)}else{let o;n.classList.add(f);const a=n.dataset.customKey,c=n.dataset.customOption;if(""===a||c)o=await r(t,0);else{const t=document.querySelectorAll(n.classList.contains("ajax-cart__item")?`li[data-custom-key="${a}"]`:`tr[data-custom-key="${a}"]`);for(const n of t){e[n.dataset.key]=0}o=await d(e)}const i=n.closest(p.cartItems);g(o,i.id),window.EventBus.emit("cart:item:removed",o),y(!1,window.fmData.cartStrings.itemRemoved),window.EventBus.emit("cart:updated",o)}0===document.querySelectorAll('input[id*="ajaxCartItem"]').length&&await fetch("/cart/clear.js").then((()=>{window.location.reload()}))},g=(t,n)=>{if(console.log("Cart",t.sections),!t||!t.sections)return;const o=s();for(const n of o){const e=(new DOMParser).parseFromString(t.sections[n.sectionId],"text/html").querySelector(`#${n.replacedContentId}`).innerHTML,o=document.querySelector(`#${n.replacedContentId}`);o&&(o.innerHTML=e)}const a=e(n),c=document.querySelector(p.cartItems);a?a.focus():c.focus(),window.EventBus.emit("content:changed"),window.EventBus.emit("cart:markup:updated",t),localStorage.getItem("OptionsUpdated")&&(localStorage.removeItem("OptionsUpdated"),document.getElementById("aboveHeaderOverlay").click()),window.EventBus.emit("cart:fix"),document.querySelector(".loading-container")?.remove()},C=async(t,n)=>{const e=document.querySelector(`[data-cart-line="${t}"]`);if(e&&e.querySelector('[aria-label="Item Details"]')){const t=e.querySelector('[aria-label="Item Details"]').querySelectorAll("li");let o=null,a=!1;if(t.forEach((t=>{const n=t.innerText.trim();n.includes("custom_key")&&(o=n.split(":")[1].replace(/\s+/g," ").trim()),n.includes("is_custom_option")&&(a=n.split(":")[1].replace(/\s+/g," ").trim())})),!a){let t={};document.querySelectorAll(`[data-custom-key="${o}"][data-custom-option="true"].input-qty__input`).forEach((e=>{e.value=n;const o=(e.closest(".cart-item")||e.closest(".ajax-cart__item")).dataset.key;t[o]=n})),await d(t),localStorage.setItem("OptionsUpdated",!0)}}setTimeout((()=>{window.EventBus.emit("cart:markup:updated")}),1e3)};document.addEventListener("change",(async t=>{const n=t.target,e=n.closest(`[${u}]`);if(!e||!n.value)return;const o=e.getAttribute(u);if(0==n.value)v(o,e);else{const a=(t.clickTarget||t.target).id;e.hasAttribute(l)?(async(t,n)=>{y(!0);let e={};const o=t.getAttribute(w),a=[...document.querySelectorAll(p.cartItem)].filter((function(t){return t.hasAttribute(w)&&t.getAttribute(w)==o}));for(const t of a)e[t.getAttribute(m)]=n;const c=await d(e),i=t.closest(p.cartItems);g(c,i.id),y(!1,window.fmData.cartStrings.itemUpdated)})(e,n.value):(async(t,n,e)=>{y(!0),await C(t,n);const o=await r(t,n);g(o,e),y(!1)})(o,n.value,a)}})),document.addEventListener("click",(t=>{const n=t.target;if(!n.closest(p.removeItem)||!n.closest(`[${u}]`))return;t.preventDefault();const e=n.closest(`[${u}]`),o=e.getAttribute(u);v(o,e)}));document.querySelectorAll(".input-qty__input").forEach((t=>{t.addEventListener("keypress",(function(t){"Enter"===t.key&&t.preventDefault()}))})),window.EventBus.on("cart:updated",g),window.EventBus.on("cart:show",(()=>{const t=new IntersectionObserver((function(t){t[0].intersectionRatio})),n=e("ajaxCart"),o=e("ajaxCartBtn"),a="BUTTON"==o.tagName,c="true"===o.getAttribute("aria-expanded");o&&a&&!c&&(o.click(),setTimeout((function(){t.observe(n)}),325))})),window.EventBus.on("cart:hide",(()=>{const t=document.querySelector(".ajax-cart__close");t&&"BUTTON"==t.tagName&&t.click()})),window.EventBus.on("cart:update:popup",(()=>{document.getElementById("MainContent").innerHTML+='\n\t\t<div class="popup-container"><p>Added to Cart!</p></div>\n\t',setTimeout((()=>{document.querySelector(".popup-container").remove()}),1500)}));const k=async()=>{if(localStorage.getItem("showCheckout")){const t=document.getElementById("MainContent");console.log("üõ†Ô∏è Cart updated, reloading.."),y(!0),t.innerHTML+='\n\t\t  <div class="loading-container"><div class="spinner"><div></div><div></div></div><p>Loading checkout..</p></div>\n\t  ';const n=document.querySelector(`${p.cartItems}`);console.log("‚úÖ Go to checkout"),window.EventBus.emit("cart:fix"),localStorage.removeItem("showCheckout"),window.location.href=n.getAttribute("action")}else window.EventBus.emit("cart:fix"),(()=>{const t=document.querySelector('[name="checkout"]');t?.addEventListener("click",(t=>{localStorage.getItem("showCheckout")||(t.preventDefault(),console.log("üõ†Ô∏è Creating storage"),localStorage.setItem("showCheckout",!0),y(!0),setTimeout((()=>{document.getElementById("MainContent").innerHTML+='\n\t\t  \t\t<div class="loading-container"><div class="spinner"><div></div><div></div></div><p></p></div>\n\t  \t\t',console.log("üõ†Ô∏è Reloading"),localStorage.removeItem("freeGiftDeniedByCustomer"),window.history.pushState({},"","/cart"),window.location.reload()}),2e3))}))})();const t=await fetch("/cart.json");(await t.json()).items.length<1&&"/cart"===window.location.pathname&&(window.location.href="/collections/sale-a")};window.addEventListener("pageshow",(async t=>{t.persisted&&(window.location.reload(),console.log("test"))})),"complete"===document.readyState?k():window.addEventListener("load",k)}));