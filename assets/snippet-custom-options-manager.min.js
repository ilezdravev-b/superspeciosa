!function(o){"function"==typeof define&&define.amd?define("customOptionsManager",o):o()}((function(){"use strict";(()=>{const o=(o=!1)=>{const t=document.querySelectorAll(".optionset-container"),n={};if(t.forEach(((o,t)=>{const e=o.querySelector("#option_set_name").value,c=o.querySelector("#linked_products").value,i=o.querySelectorAll(".option-container"),s=[];i.forEach((o=>{const t=o.querySelector("#option_type").value,n=o.querySelector("#option_handle").value,e={option_type:t,option_handle:n};if("swf-single-option"===t||"swf-multiple-option"===t){["option_title","option_title_display","option_hidden_options","option_hidden_sku","option_products_custom_titles","option_labels","option_message_id","option_message_title","option_message","option_switcher","option_in_cart"].forEach((t=>{e[t]=o.querySelector(`#${t}`).value}));const n={};c.split(",").forEach((e=>{n[e]=o.querySelector("swf-single-option"===t?`#option_products_${e}`:"#option_products").value})),e.option_products=n}else if("swf-dye-color-option"===t){["dye_color_number","options_preselected","option_confirmation"].forEach((t=>{e[t]=o.querySelector(`#${t}`).value}))}s.push(e)})),n[e]={title:e,linked_products:c,options:s}})),console.log(n),o)return n;navigator.clipboard.writeText(JSON.stringify(n)),alert("Data copied to clipboard")};const t=()=>{const t=o(!0),n=Object.keys(t),e=[];n.forEach((o=>{const n=t[o];n.linked_products.split(",").forEach((o=>{let t=n.options;t.forEach((t=>{t.option_products&&(t.option_products=t.option_products[o])}));const c={"Products handle":"","Products GID":`gid://shopify/Product/${o}`,namespace:"custom",key:"product_options",value:JSON.stringify({productId:o,custom_options:t})};e.push(c)}))}));const c=function(o){const t=[],n=Object.keys(o[0]);return t.push(n.join(",")),o.forEach((o=>{const e=n.map((t=>"value"===t?`"${o[t].replace(/"/g,'""')}"`:o[t]));t.push(e.join(","))})),t.join("\n")}(e),i=new Blob([c],{type:"text/csv"}),s=document.createElement("a");s.href=window.URL.createObjectURL(i),s.download="custom_options.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)},n=()=>{const o=document.querySelectorAll(".optionset-container")[0].cloneNode(!0);document.querySelector(".optionsets").appendChild(o),console.log("clonedItem",o);const t=o.querySelector(".handle-display-options"),n=o.querySelector(".search-product-icon"),e=document.querySelector(".search-product-id-selector"),c=o.querySelectorAll("input");t.addEventListener("click",(()=>{t.nextElementSibling.classList.toggle("hidden")})),n.addEventListener("click",(()=>{n.parentElement.nextElementSibling.nextElementSibling.classList.toggle("hidden")})),e.addEventListener("change",(()=>{const o=e.parentElement.previousElementSibling;o.value=`${o.value},${e.value}`})),c.forEach((o=>{o.value=""}))};window.addEventListener("load",(()=>{const e=document.getElementById("saveData"),c=document.getElementById("exportFullCSV"),i=document.getElementById("addOptionset"),s=document.querySelectorAll(".search-product-icon"),d=document.querySelectorAll(".search-product-id-selector"),p=document.querySelectorAll(".handle-display-options");e.addEventListener("click",o),c.addEventListener("click",t),i.addEventListener("click",n),s.forEach((o=>{o.addEventListener("click",(()=>{o.parentElement.nextElementSibling.nextElementSibling.classList.toggle("hidden")}))})),d.forEach((o=>{o.addEventListener("change",(()=>{const t=o.parentElement.previousElementSibling;t.value=`${t.value},${o.value}`}))})),p.forEach((o=>{o.addEventListener("click",(()=>{o.nextElementSibling.classList.toggle("hidden")}))}))})),window.addEventListener("beforeunload",(function(o){const t="Before leave please be sure to save the optionsets?";return(o||window.event).returnValue=t,t}))})()}));