!function(o){"function"==typeof define&&define.amd?define("customOptions",o):o()}((function(){"use strict";const o=async(o,t=null,n=!0)=>{try{const i=await(e=o,c=t,c=c||{},new Promise((function(o,t){var n=new XMLHttpRequest,i=[],s=[],r={},d=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:d,headers:{keys:function(){return i},entries:function(){return s},get:function(o){return r[o.toLowerCase()]},has:function(o){return o.toLowerCase()in r}}}};for(var u in n.open(c.method||"get",e,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(o,t,n){i.push(t=t.toLowerCase()),s.push([t,n]),r[t]=r[t]?r[t]+","+n:n})),o(d())},n.onerror=t,n.withCredentials="include"==c.credentials,c.headers)n.setRequestHeader(u,c.headers[u]);n.send(c.body||null)})));if(!i.ok)throw Error(i.statusText);if(n)return await i.json();if(!n)return await i.text()}catch(o){console.error(o)}var e,c},t=window.Shopify.routes.root,n=["ajaxCartContent","ajaxCartBtn","cartContent","announcementBars"],e=o=>{const t=[];for(const o of n){const n=document.getElementById(o);n&&t.push({replacedContentId:o,sectionId:n.closest(".shopify-section").id.replace("shopify-section-","")})}return o?t.map((o=>o.sectionId)):t};(()=>{const n=()=>{const o=document.querySelector(".dye-color-options"),t=document.querySelector(".swf-custom-option-item.selected")?.dataset.name;o&&t&&(o=>{const t=document.getElementById("DYEColorOptions"),n=document.getElementById("DIYColorOptions"),e=o.toLowerCase().includes("build it for me")||o.toLowerCase().includes("custom dye"),i=o.toLowerCase().includes("ready to ship");n.style.display=e?"none":"block",t.style.display=e?"block":"none",e?(t.querySelectorAll(".dye_color_option").forEach((o=>{o.classList.contains("hidden")&&o.classList.remove("hidden")})),n.querySelectorAll(".diy_color_option").forEach((o=>{o.classList.add("hidden")}))):(n.querySelectorAll(".diy_color_option").forEach((o=>{o.classList.contains("hidden")&&o.classList.remove("hidden")})),t.querySelectorAll(".dye_color_option").forEach((o=>{o.classList.add("hidden")})),i&&n.querySelectorAll(".diy_color_option").forEach((o=>{o.classList.add("hidden")}))),c()})(t)},c=()=>{const o=document.getElementById("swf-extra-prices"),t=document.getElementById("swf-extra-price-value");let n=0;document.querySelectorAll('[name*="properties"]').forEach((o=>{if(!o.classList.contains("hidden")&&!o.classList.contains("multi-hidden")&&o.value.includes("$")&&"true"!==o?.dataset?.switcher){const t=parseFloat(o.value.split("$")[1].trim());n+=t}})),o.style.display=n>0?"block":"none",t.innerHTML=`$${n.toFixed(2)}`},i=(o,t)=>{o.split("*").forEach((o=>{const[n,e]=o.split(":"),c=e.split(","),i=t.dataset.sku;c.forEach((o=>{const t=document.querySelector(`#${o.trim()}-custom-optionset`);if(t){const e=t.querySelectorAll('[name*="properties"]');i===n?(t.style.display="none",e.forEach((o=>o.classList.add("hidden"))),"color-picker"===o&&document.querySelector(".confirm-color-options")&&(document.querySelector(".confirm-color-options").style.display="none")):(t.style.display="grid",e.forEach((o=>o.classList.remove("hidden"))),"color-picker"===o&&document.querySelector(".confirm-color-options")&&(document.querySelector(".confirm-color-options").style.display="block"))}}))}))},s=async n=>{n.preventDefault();const c=document.querySelector('[data-switcher="true"] input'),i=document.querySelector('.selected [data-switcher="true"]');if(i&&"false"===i.dataset.available)return!1;const s=document.getElementById("confirmColors");if(s&&0===s.selectedIndex&&"none"!==document.querySelector(".confirm-color-options").style.display)return void(document.querySelector(".confirm-color-options p").style.display="block");const r=document.getElementById("MainContent"),d=document.getElementById("customOptionVariant").value,u=parseInt(document.querySelector(".input-qty__input").value),a=(o=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let e=0;e<o;e++)n+=t[Math.floor(Math.random()*t.length)];return n})(12),p=[],m={};if(c&&c.dataset&&c.dataset.handle){const o=`/products/${c.dataset.handle}`;m.main_handle=o}m.custom_key=a,document.querySelectorAll('[name*="properties"]').forEach((o=>{if(!o.classList.contains("hidden")&&!o.classList.contains("multi-hidden")){const t=o.name.match(/\[(.*?)\]/);if(t&&t.length>1){const n=t[1];if(m[n]=o.value,"true"===o.dataset.inCart){const t="SELECT"===o.tagName?o.options[o.selectedIndex].dataset.variant:o.dataset.variant;t&&p.push({id:t,quantity:u,properties:{custom_key:a,is_custom_option:!0}})}}}})),p.push({id:d,quantity:u,properties:m}),r.innerHTML+='\n\t\t  <div class="loading-container"><div class="spinner"><div></div><div></div></div><p>Adding to cart</p></div>\n\t  ';try{await(async n=>{const c={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:n,sections:e(!0)})};return await o(`${t}cart/add.js`,c)})(p),localStorage.setItem("cart_updated",!0),window.location.reload()}catch(o){console.error("Error adding items to cart:",o)}},r=o=>{const t=document.getElementById("customOptionVariant");if(o?.dataset?.switcher){t.value=o.dataset.id;const n=parseFloat(o.dataset.price)/100,e=parseFloat(o.dataset.comparedPrice)/100,c=o.dataset.available,i=document.querySelector(".js-price"),s=document.querySelector(".js-compare-price"),r=document.querySelector(".product__price__percent-save"),d=document.querySelector(".saving-price-value"),u=document.getElementById("buttonPriceText"),a=`$${n.toFixed(2)}`,p=`$${e.toFixed(2)}`,m=`$${(e-n).toFixed(2)}`,l=100-parseFloat(o.dataset.price)/parseFloat(o.dataset.comparedPrice)*100;i.innerHTML=a,s&&d&&m&&r&&(s.innerHTML=p,d.innerHTML=`(${m})`,r.innerHTML=`Save ${l.toFixed(0)}%`),u.innerHTML="true"===c?`Add to cart â€¢ ${a}`:"Sold Out"}(o=>{const t=o?.dataset?.messageId||"",n=o?.dataset?.handle;o?.dataset?.productId===t&&""!==t?(parseFloat(o.dataset.price/100).toFixed(2),n&&(document.querySelector(`#warning-message-${n}`).style.display="block")):n&&(document.querySelector(`#warning-message-${n}`).style.display="none")})(o)},d=()=>{const o=document.getElementById("customAddToCartButton"),t=document.querySelectorAll(".swf-custom-option-item"),e=document.querySelectorAll(".swf-custom-product-dropdown select");document.querySelectorAll(".swf-custom-option-item.selected").forEach((o=>{o.click(),o.click();const t=o.dataset.hiddenOptions;t&&i(t,o),o.dataset.handle.includes("assortment-pack")&&(o=>{document.querySelector(".product-options").style.display="none";const t=document.querySelectorAll(".swf-custom-option-item");t.forEach((o=>{o.addEventListener("click",(()=>{const t=document.getElementById("presoftener_25_options-custom-optionset"),n=document.getElementById("presoftener_50_options-custom-optionset"),e=document.getElementById("presoftener_100_options-custom-optionset"),c=document.getElementById("presoftener_200_options-custom-optionset");t.style.display="25 Pack"===o.dataset.name?"block":"none",n.style.display="50 Pack"===o.dataset.name?"block":"none",e.style.display="100 Pack"===o.dataset.name?"block":"none",c.style.display="200 Pack"===o.dataset.name?"block":"none"}))})),t[0].click()})()})),t.forEach((o=>{o.addEventListener("click",(()=>{const t=o.dataset.handle,e=document.querySelectorAll(`#${t}-item-options .swf-custom-option-item`),c=o.dataset.type,s=document.getElementById(`option-${t}-value`),d=o.dataset.hiddenSku,u=o.dataset.name,a=`$${(parseFloat(o.dataset.price)/100).toFixed(2)}`,p=o.dataset.sku,m=d?`${u} ${a}`:`${u} [${p}] ${a}`,l="swf-single-option"===c;if(o.classList.contains("disabled-option"))return!1;if(l)s.value=m,e.forEach((t=>{t==o?(o.classList.add("selected"),r(o)):t.classList.remove("selected")}));else{o.classList.toggle("selected");const t=o.classList.contains("selected"),n=o.querySelector("input");t?(n.classList.remove("multi-hidden"),r(o)):n.classList.add("multi-hidden")}const f=o.dataset.hiddenOptions;f&&i(f,o),n()}))})),e.forEach((o=>{o.addEventListener("change",(()=>{if(c(),o.dataset.handle.includes("softener")){const t=document.querySelector(`#warning-message-${o.dataset.handle}`);t.style.display="block",t.style.marginTop="-14px",t.innerHTML="<b>We recommend 1-2 bottles of Sola Softener.</b>"}else if(o.dataset.handle.includes("presoftened")&&o.value.includes("Yes")){const t=document.querySelector(`#warning-message-${o.dataset.handle}`);t.style.display="block",t.style.marginTop="-14px",t.innerHTML="<b>NOTE: Adds up to 12 business days.</b>"}else if(o.dataset.handle.includes("presoftened")&&o.value.includes("No")){document.querySelector(`#warning-message-${o.dataset.handle}`).style.display="none"}}))})),o&&o.addEventListener("click",s),n();const u=document.querySelector(".swf-custom-option-item.selected");r(u),localStorage.getItem("cart_updated")&&(localStorage.removeItem("cart_updated"),window.EventBus.emit("cart:markup:updated"),window.EventBus.emit("cart:update:popup"),d())};"complete"===document.readyState?d():window.addEventListener("load",d),window.EventBus.on("option:reload",d)})()}));